<html> <head> <title>TSEARCH2 PostgreSQL FtsEngineDriver for OpenACS
  5.x</title> </head> <h1>TSEARCH2 PostgreSQL FtsEngineDriver for
  OpenACS 5.x</h1> <h2>Installing</h2> 
<p>tsearch2-driver requires:</p>
  <ul><li>PostgreSQL 7.3 or newer
  </li><li>PostgreSQL's tsearch2 module 
  </li><li>PostgreSQL versions 7.3 and 7.4 require tsearch2.sql to be
  loaded into the database
  </li><li>search package to be mounted somewhere.
  </li><li>FtsEngineDriver parameter of search package set to "tsearch2-driver".
  </li></ul>

  <h2>Using</h2>
  <p>
  Once tsearch2-driver is installed, add some content to be indexed. 
  Weblogger or edit-this-page has code to generate indexed
  content. Lars-blogger package may require manually loading lars-blogger-sc-create.sql to get
  Weblogger to register the service contract implementation that indexes
  the content.
  </p>

  <h2>Indexing pre-existing content that has been indexed before</h2>
  <p>If your pre-existing content has been indexed before (e.g. because the
  search package was mounted before as part of a previous search
  service), you have to tell the search package to reindex:</p>
  <pre>
    insert into search_observer_queue (
            select <i>my_id</i>, now(),'INSERT' from <i>my_table</i>
            );
  </pre><p>
For forums and ETP this looks like:
 </p>
<pre>
    insert into search_observer_queue (
            select message_id, now(), 'INSERT' from forums_messages
            );
    insert into search_observer_queue (
            select live_revision, now(), 'INSERT' from (
                    select live_revision from cr_items where content_type = 'etp_page_revision'
                    ) 
            etp );
</pre>

  <h2>Features</h2>
<p>
  This version includes only the most basic features.
  Many options are possible by adding admin configurable parameters.
  The current service contract definitions are not
  flexible enough to work well with every possible search driver, so
  some features may require making some improvements to the search package also.
</p>
  <p>Dave Bauer dave@thedesignexperience.org 2004-06-05</p>
