#
#  Copyright (C) 2005 MIT
#
#  This file is part of dotLRN.
#
#  dotLRN is free software; you can redistribute it and/or modify it under the
#  terms of the GNU General Public License as published by the Free Software
#  Foundation; either version 2 of the License, or (at your option) any later
#  version.
#
#  dotLRN is distributed in the hope that it will be useful, but WITHOUT ANY
#  WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
#  FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
#  details.
#

#
# This is the script to create the site-wide-search package for .LRN
#
# @author <a href="mailto:openacs@dirkgomez.de">openacs@dirkgomez.de</a>
# @version $Id$
# @creation-date 13-May-2005
#
# Ported from ACES.
#
# prerequisites:

# Oracle 8.1.7.4 (I have not tried .LRN search with Oracle 9i, but
# it'll probably work, it won't work with Oracle 10g.)
# Also consider this Oracle bug.:
# http://metalink.oracle.com/metalink/plsql/ml2_documents.showDocument?p_database_id=NOT&p_id=261880.1

# Call with load-site-wide-search dbuser passwd ctxsyspasswd.

USERNAME=$1
PASSWORD=$2
CTXSYS_PASSWORD=$3

# For programming convenience just drop everything
sqlplus ${USERNAME}/${PASSWORD}   @search-tables-drop.sql 
sqlplus ${USERNAME}/${PASSWORD}   @search-packages-drop.sql 
sqlplus ${USERNAME}/${PASSWORD}   @search-index-drop.sql  ${USERNAME} ${PASSWORD}

sqlplus ${USERNAME}/${PASSWORD}   @search-tables-create.sql 
sqlplus ${USERNAME}/${PASSWORD}   @search-packages-create.sql 
sqlplus ctxsys/${CTXSYS_PASSWORD} @search-ctxsys.sql ${USERNAME} ${PASSWORD}
sqlplus ${USERNAME}/${PASSWORD}   @search-index-create.sql  ${USERNAME} ${PASSWORD}
sqlplus ${USERNAME}/${PASSWORD}   @search-from-scratch.sql 
