<html xmlns:lxslt="http://xml.apache.org/xslt" xmlns:saxon="http://icl.com/saxon" xmlns:xalanredirect="org.apache.xalan.xslt.extensions.Redirect"><head>
<META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>3. Using PSGML mode in Emacs</title><link rel="stylesheet" href="ad.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.24"><link rel="home" href="index.html" title="ACS Core"><link rel="up" href="eng-standards.html" title="6. Engineering Standards"><link rel="previous" href="docbook-primer.html" title="2. aD DocBook Primer"><link rel="next" href="filename.html" title="4. Detailed Design Documentation Template"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><a href="http://www.openacs.org/"><img src="images/alex.jpg" border="0"></a><br><br><a class="topnav" href="/">Home</a><span class="topnav"> : </span><a class="topnav" href="index">Documentation</a><span class="topnav"> : </span><a class="topnav" href="acs-dev.html">Part III. For ACS Developers</a><span class="topnav"> : </span><a class="topnav" href="eng-standards.html">6. Engineering Standards</a><span class="topnav"> : </span><strong class="topnav">3. Using PSGML mode in Emacs&nbsp;</strong><hr size="1" noshade><div id="psgml-mode" class="sect1"><div class="titlepage"><h2 class="title" style="clear: all"><a name="psgml-mode"></a><span class="label">3.</span> <span class="title">Using PSGML mode in Emacs</span></h2></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt>3.1. <a href="psgml-mode.html#psgml-mode-whatisit">What it is</a></dt><dt>3.2. <a href="psgml-mode.html#psgml-mode-getit">Where to get it</a></dt><dt>3.3. <a href="psgml-mode.html#psgml-mode-catalogs">Using <tt>CATALOG</tt> files</a></dt><dt>3.4. <a href="psgml-mode.html#psgml-mode-tell-emacs">What to tell emacs</a></dt><dt>3.5. <a href="psgml-mode.html#psgml-mode-doctype">What is a <strong><tt>DOCTYPE</tt></strong> ?</a></dt><dt>3.6. <a href="psgml-mode.html#psgml-mode-usage">How to use it</a></dt><dt>3.7. <a href="psgml-mode.html#psgml-mode-reading">Further reading</a></dt></dl></div><p><p>
By <a href="mailto:lutter@arsdigita.com" target="_top">David Lutterkort</a>
</p></p><div id="psgml-mode-whatisit" class="sect2"><div class="titlepage"><h3 class="title"><a name="psgml-mode-whatisit"></a><span class="label">3.1.</span> <span class="title">What it is</span></h3></div><p>PSGML Mode is a mode for editing, umm, SGML and XML documents in emacs. It
can parse a DTD and help you insert the right tags in the right place, knows
about tags' attributes and can tell you in which contexts a tag can be
used. <i>If</i> you give it the right DTD, that is. But even without a DTD,
it can save you some typing since pressing <tt>C-c/</tt> will close an open
tag automatically.</p></div><div id="psgml-mode-getit" class="sect2"><div class="titlepage"><h3 class="title"><a name="psgml-mode-getit"></a><span class="label">3.2.</span> <span class="title">Where to get it</span></h3></div><p>Most newer emacsen come with PSGML mode preinstalled. You can find out
whether your emacs has it with the <tt>locate-library</tt> command. In Emacs,
type <tt>M-x locate-library</tt> and enter <tt>psgml</tt>. Emacs will tell
you if it found it or not.</p><p>If you don't have PSGML preinstalled in your Emacs, there are two
things you can do:</p><div class="orderedlist"><ol type="1"><li><a name="N9199"></a><p><strong>On Linux:</strong> Get the <a href="ftp://sourceware.cygnus.com:/pub/docbook-tools/docware/RPMS/noarch/psgml-1.2.1-1.noarch.rpm" target="_top">
psgml rpm</a> from <a href="http://sources.redhat.com/docbook-tools/" target="_top">RedHat's
docbook-tools</a> and install it as usual.</p></li><li><a name="N9212"></a><p><strong>On other systems:</strong> Get the tarball from the <a href="http://www.lysator.liu.se/~lenst/about_psgml/" target="_top">PSGML Website.</a>
Unpack it and follow the install instructions.</p></li></ol></div></div><div id="psgml-mode-catalogs" class="sect2"><div class="titlepage"><h3 class="title"><a name="psgml-mode-catalogs"></a><span class="label">3.3.</span> <span class="title">Using <tt>CATALOG</tt> files</span></h3></div><p>The easiest way to teach PSGML mode about a DTD is by adding it to your
own <tt>CATALOG</tt>. Here is an example of how you can set that up for the
Docbook XML DTD.</p><div class="orderedlist"><ol type="1"><li><a name="N9238"></a><p>Get the <a href="http://docbook.org/xml/index.html" target="_top">Docbook XML DTD</a>
zip archive from <a href="http://docbook.org/" target="_top">docbook.org</a></p></li><li><a name="N9248"></a><p>Go somewhere in your working directory and do </p><blockquote><table border="0" cellpadding="5" cellspacing="0"><tr><td class="codeblock"><pre>
      mkdir -p dtd/docbook-xml
      cd dtd/docbook-xml
      unzip -a &lt;docbook XML DTD zip archive&gt;
   
</pre></td></tr></table></blockquote></li><li><a name="N9254"></a><p>Create a file with the name <tt>CATALOG</tt> in the <tt>dtd</tt>
directory and put the line </p><blockquote><table border="0" cellpadding="5" cellspacing="0"><tr><td class="codeblock"><pre>
      CATALOG "docbook-xml/docbook.cat"
</pre></td></tr></table></blockquote><p>
in it. By maintaining your own <tt>CATALOG</tt>, it is easy to add more
DTD's without changing your emacs settings. (<i>How about that HTML 4.01 DTD you
always wanted to get from <a href="http://www.w3.org/TR/html4/" target="_top">W3C</a> ? The
DTD is in the zip archives and tarballs available on the site.</i></p></li></ol></div><p>That's it. Now you are ready to tell emacs all about PSGML mode and
that funky <tt>CATALOG</tt></p></div><div id="psgml-mode-tell-emacs" class="sect2"><div class="titlepage"><h3 class="title"><a name="psgml-mode-tell-emacs"></a><span class="label">3.4.</span> <span class="title">What to tell emacs</span></h3></div><p>If you installed PSGML mode in a non-standard location, e.g., somewhere in
your home directory, you need to add this to the <tt>load-path</tt> by adding
this line to your <tt>.emacs</tt> file:</p><blockquote><table border="0" cellpadding="5" cellspacing="0"><tr><td class="codeblock"><pre>
      (add-to-list 'load-path "/some/dir/that/contains/psgml.elc")
   
</pre></td></tr></table></blockquote><p>To let PSGML mode find your <tt>CATALOG</tt> and to enable PSGML mode for
all your editing, add these lines to your <tt>.emacs</tt>:</p><blockquote><table border="0" cellpadding="5" cellspacing="0"><tr><td class="codeblock"><pre>
      (require 'psgml)

      (add-to-list 'auto-mode-alist '("\\.html" . sgml-mode))
      (add-to-list 'auto-mode-alist '("\\.adp" . xml-mode))
      (add-to-list 'auto-mode-alist '("\\.xml" . xml-mode))
      (add-to-list 'auto-mode-alist '("\\.xsl" . xml-mode))
      
      (add-to-list 'sgml-catalog-files "/path/to/your/dtd/CATALOG")
   
</pre></td></tr></table></blockquote><p>If you want font-locking and indentation, you can also add these lines
into the <tt>.emacs</tt> file:</p><blockquote><table border="0" cellpadding="5" cellspacing="0"><tr><td class="codeblock"><pre>
      (setq sgml-markup-faces '((start-tag . font-lock-function-name-face)
                                (end-tag . font-lock-function-name-face)
                (comment . font-lock-comment-face)
                (pi . bold)
                (sgml . bold)
                (doctype . bold)
                (entity . font-lock-type-face)
                (shortref . font-lock-function-name-face)))
      (setq sgml-set-face t)
      (setq-default sgml-indent-data t)
      ;; Some convenient key definitions:
      (define-key sgml-mode-map "\C-c\C-x\C-e" 'sgml-describe-element-type)
      (define-key sgml-mode-map "\C-c\C-x\C-i" 'sgml-general-dtd-info)
      (define-key sgml-mode-map "\C-c\C-x\C-t" 'sgml-describe-entity))))
   
</pre></td></tr></table></blockquote></div><div id="psgml-mode-doctype" class="sect2"><div class="titlepage"><h3 class="title"><a name="psgml-mode-doctype"></a><span class="label">3.5.</span> <span class="title">What is a <strong><tt>DOCTYPE</tt></strong> ?</span></h3></div><p>All SGML and XML documents that should conform to a DTD have to declare a
doctype. For the docbook XML, all your <tt>.xml</tt> files whould start with
the line</p><blockquote><table border="0" cellpadding="5" cellspacing="0"><tr><td class="codeblock"><pre>
      &lt;!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN" "docbookx.dtd"&gt;
   
</pre></td></tr></table></blockquote><p>If your document is only part of a larger XML document, you can tell PSGML
mode about it by <i>appending</i> the following lines to your file. In this
case, do <i>not</i> include a DOCTYPE declaration in your file.</p><blockquote><table border="0" cellpadding="5" cellspacing="0"><tr><td class="codeblock"><pre>
      &lt;!--
       Local Variables:
       sgml-parent-document: ("top.xml" "book" "sect1")
       End:
      --&gt;
   
</pre></td></tr></table></blockquote><p>Which says that the parent of this document can be found in the file
<tt>top.xml</tt>, that the element in the parent that will enclose the
current document is a <tt>book</tt> and that the current file's topmost
element is a <tt>sect1</tt>.</p></div><div id="psgml-mode-usage" class="sect2"><div class="titlepage"><h3 class="title"><a name="psgml-mode-usage"></a><span class="label">3.6.</span> <span class="title">How to use it</span></h3></div><p>Of course, you should read the emacs texinfo pages that come with PSGML
mode from start to finish. Barring that, here are some handy commands:</p><div class="informaltable" id="N9373"><a name="N9373"></a><table cellpadding="5" cellspacing="0" border="0"><colgroup><col><col></colgroup><tbody><tr><td xmlns="http://www.w3.org/TR/xhtml1/transitional"><strong xmlns="">Key</strong></td><td xmlns="http://www.w3.org/TR/xhtml1/transitional"><strong xmlns="">Command</strong></td></tr><tr><td xmlns="http://www.w3.org/TR/xhtml1/transitional"><tt xmlns="">C-c&nbsp;C-e</tt></td><td xmlns="http://www.w3.org/TR/xhtml1/transitional">Insert an element. Uses completion and only lets you insert elements that
are valid</td></tr><tr><td xmlns="http://www.w3.org/TR/xhtml1/transitional"><tt xmlns="">C-c&nbsp;C-a</tt></td><td xmlns="http://www.w3.org/TR/xhtml1/transitional">Edit attributes of enclosing element.</td></tr><tr><td xmlns="http://www.w3.org/TR/xhtml1/transitional"><tt xmlns="">C-c&nbsp;C-x&nbsp;C-i</tt></td><td xmlns="http://www.w3.org/TR/xhtml1/transitional">Show information about the document's DTD.</td></tr><tr><td xmlns="http://www.w3.org/TR/xhtml1/transitional"><tt xmlns="">C-c&nbsp;C-x&nbsp;C-e</tt></td><td xmlns="http://www.w3.org/TR/xhtml1/transitional">Describe element. Shows for one element which elements can be parents,
what its contents can be and lists its attributes.</td></tr></tbody></table></div></div><div id="psgml-mode-reading" class="sect2"><div class="titlepage"><h3 class="title"><a name="psgml-mode-reading"></a><span class="label">3.7.</span> <span class="title">Further reading</span></h3></div><p>Start with the <a href="docbook-primer.html">aD DocBook Primer</a></p><p><div align="right" class="cvstag">($Id$)</div></p></div></div><div class="navfooter"><hr size="1" noshade><table width="100%"><tr><td width="40%" align="left"><a class="bottomnav" href="docbook-primer.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a href="mailto:acs-docs@arsdigita.com"><address class="nav">acs-docs@arsdigita.com</address></a></td><td width="40%" align="right">&nbsp;<a class="bottomnav" href="filename.html">Next</a></td></tr></table></div></body></html>
