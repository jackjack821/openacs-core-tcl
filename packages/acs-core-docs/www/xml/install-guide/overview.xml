<?xml version='1.0' ?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.1.2//EN"
               "http://www.oasis-open.org/docbook/xml/4.1.2/docbookx.dtd" [
<!ENTITY % myvars SYSTEM "../variables.ent">
%myvars;
]>
  <chapter id="install-overview">
    <title>Installation Overview</title>
    
    <authorblurb>
      by <ulink url="mailto:vinod@kurup.com">Vinod Kurup</ulink>
    </authorblurb>
    
    <sect1 id="install-steps">
      <title>Basic Steps</title>
      <para>
	  The basic steps to getting OpenACS up and running are: 
	</para>
      
      <orderedlist>
        <listitem><para>Install an OS (<link
      linkend="unix-install">Linux, FreeBSD, OpenBSD</link>, <xref linkend="install-redhat"/>, <xref linkend="mac-installation"/>, <xref
              linkend="win2k-installation"/>).</para>
        </listitem>
        
        <listitem><para>Install a database (<link
	  linkend="oracle">Oracle</link> or
	  <link linkend="postgres">PostgreSQL</link>).</para>
        </listitem> 

        <listitem>
          <para><link linkend="aolserver">Install the AOLserver webserver</link>.</para>
        </listitem>
        
        <listitem><para>Create a unique database and system user.
      Install the OpenACS tarball, start and AOLserver instance, and
      use the OpenACS web pages to complete installation
      (<xref linkend="openacs"/>).</para>
        </listitem>
        
      </orderedlist>
      <sect2 id="install-rpms">
        <title>Binaries and other shortcuts</title>
        <orderedlist>
          <listitem>
            <para>The patched version of AOLserver we use is not currently
      available in a precompiled binary.  </para>
          </listitem>
          <listitem>
            <para>
        The packaged version of
      PostGreSQL in Debian and Red Hat and FreeBSD ports works fine.</para>
          </listitem>
          <listitem>
            <para>Jonathan Marsden has created RPMs (at
      <ulink
      url="http://www.xc.org/jonathan/openacs/openacs4-rpm-based-install.html">http://www.xc.org</ulink>)
      for OpenACS 4.5 but there are not yet any for version
      &version;.  </para>
          </listitem>
          <listitem>
            <para>An experimental script automating OpenACS checkout
      and installation is in the openacs cvs tree at
      <computeroutput>/etc/install.sh</computeroutput>.
</para>
          </listitem>
<!--          <listitem>
            <para>The <link linkend="quick">Quick Guide</link> lists the essential steps for a minimal install.
</para>
          </listitem>
-->
        </orderedlist>
      </sect2>
      <sect2 id="install-requirements">
        <title>Requirements</title>
        <para>
	  You will need a PC (or equivalent) with at least these minimum
	  requirements:
	</para>
        <itemizedlist>
          <listitem><para>Pentium processor</para></listitem>
          <listitem><para>128 MB RAM
		  (much more if you want Oracle)</para></listitem> 
          <listitem><para>4 GB hard drive</para></listitem>
          <listitem><para>A Unix-like operating system with tcl, tdom, and
      a mail transport agent.  (<xref
                linkend="individual-programs"/>)</para>
          </listitem>
        </itemizedlist><para>
	  All of the software that you will need is free and open-source,
	  except for Oracle. You can obtain a free copy of Oracle for
	  development purposes. This is described in the <xref
            linkend="install-oracle-getit"/> section.
	</para>
        <figure id="compatibility-matrix">
          <title>Compatibility Matrix</title>
          <informaltable>
            <tgroup cols="8">
              <colspec colname="c1"/>
              <colspec colname="c2"/>
              <colspec colname="3.2.5"/>
              <colspec colname="4.5"/>
              <colspec colname="4.6"/>
              <colspec colname="4.6.1"/>
              <colspec colname="4.6.2"/>
              <colspec colname="4.6.3"/>
              <colspec colname="5.0.0"/>
              <spanspec align="center" colsep="0" rowsep="0" spanname="version" namest="c1" nameend="c2"/>
              <tbody>
                <row>
                  <entry spanname="version">OpenACS Version</entry>
                  <entry colname="3.2.5">3.2.5</entry>
                  <entry colname="4.5">4.5</entry>
                  <entry colname="4.6">4.6</entry>
                  <entry colname="4.6.1">4.6.1</entry>
                  <entry colname="4.6.2">4.6.2</entry>
                  <entry colname="4.6.3">4.6.3</entry>
                  <entry colname="5.0.0">5.0.0</entry>
                </row>
                <row>
                  <entry morerows="6">AolServer</entry>
                  <entry>3</entry>
                  <entry namest="3.2.5" nameend="3.2.5" align="center">Verified</entry>
                </row>
                <row>
                  <entry>3.3+ad13</entry>
                  <entry namest="4.5" nameend="5.0.0" align="center">Verified</entry>
                </row>
                <row>
                  <entry>3.3oacs1</entry>
                  <entry namest="4.6.2" nameend="5.0.0" align="center">Verified</entry>
                </row>  
                <row>
                  <entry>3.4.2</entry>
                  <entry namest="4.6.2" align="center">No</entry>
                </row>  
                <row>
                  <entry>3.4.2oacs1</entry>
                  <entry namest="4.6.2" align="center">Verified</entry>
                </row>  
                <row>
                  <entry>3.5.5</entry>
                  <entry namest="4.6.2" align="center">Verified</entry>
                </row>  
                <row>
                  <entry>4</entry>
                  <entry namest="3.2.5" nameend="4.6.3"
                    align="center">Verified but not for production</entry>
                </row>
                <row>
                  <entry morerows="2">PostGreSQL</entry>
                  <entry>7.0</entry>
                  <entry namest="3.2.5" nameend="3.2.5" align="center">Verified</entry>
                </row>
                <row>
                  <entry>7.2.x</entry>
                  <entry namest="4.5" nameend="4.6.3" align="center">Verified</entry>
                </row>
                <row>
                  <entry>7.3.2 - 7.3.4</entry>
                  <entry namest="3.2.5" nameend="4.6.2" align="center">No</entry>
                  <entry namest="4.6.3" nameend="5.0.0" align="center">Verified</entry>
                </row>
                <row>
                  <entry morerows="2">Oracle</entry>
                  <entry>8.1.6</entry>
                  <entry namest="4.5" nameend="4.6.3" align="center">Verified</entry>
                </row>
                <row>
                  <entry>8.1.7</entry>
                  <entry namest="4.5" nameend="5.0.0" align="center">Verified</entry>
                </row>
                <row>
                  <entry>9i</entry>
                  <entry namest="3.2.5" nameend="4.6.3" align="center">No</entry>
                  <entry namest="5.0.0" nameend="5.0.0" align="center">Untested</entry>
                </row>
              </tbody>
            </tgroup>
          </informaltable>
        </figure>
      </sect2>
    </sect1>
    
    <sect1 id="how-to-use">
      <title>How to use this guide</title>
      <itemizedlist>
        <listitem>
          <para><computeroutput>This</computeroutput> is text you will see on
            screen, such as a <computeroutput><guibutton><accel>B</accel>utton</guibutton></computeroutput> or <computeroutput><guilabel><accel>link</accel></guilabel></computeroutput>
            in a radio button list or menu.</para>
        </listitem>
        <listitem><para><userinput>This is text that you will type.</userinput></para></listitem>
        <listitem>
          <para>This is text from a program or file which you may need to
examine or edit:</para>
          <programlisting>if {$database == "oracle"} {
    set db_password        "mysitepassword"
}</programlisting>
        </listitem>
        <listitem>
          <para>This is text that you will
<computeroutput>see</computeroutput> and <userinput>type</userinput> in a command shell, including <replaceable>text you may have to
change</replaceable>.  It is followed by a list of just the commands,
which you can copy and paste.</para>
          <screen>[root@localhost root]# <userinput>su - nsadmin</userinput>
[nsadmin@localhost aolserver]$ <userinput>svc -d /service/<replaceable>server1</replaceable></userinput>
[nsadmin@localhost aolserver]$ <userinput>dropdb <replaceable>server1</replaceable></userinput>
DROP DATABASE
[nsadmin@localhost aolserver]$ <userinput>createdb <replaceable>server1</replaceable></userinput>
CREATE DATABASE
<action>su - nsadmin
svc -d /service/<replaceable>server1</replaceable>
dropdb <replaceable>server1</replaceable>
createdb <replaceable>server1</replaceable></action></screen>
        </listitem>
      </itemizedlist>
      
      <sect2>
        <title>Paths and Users</title>
        
        <figure>
          <title>Assumptions in this section</title>
          <informaltable>
            <tgroup cols="2">
              <tbody>
                <row>
                  <entry>Fully qualified domain name of your server</entry>
                  <entry><replaceable>yourserver.test</replaceable></entry>
                </row>
                <row>
                  <entry>name of administrative access account</entry>
                  <entry>remadmin</entry>
                </row>
                <row>
                  <entry>OpenACS service</entry>
                  <entry><indexterm>
                      <primary>service0</primary>
                    </indexterm>
<replaceable>service0</replaceable></entry>
                </row>
                <row>
                  <entry>OpenACS service account</entry>
                  <entry><replaceable>service0</replaceable></entry>
                </row>
                <row>
                  <entry>OpenACS database name</entry>
                  <entry><replaceable>service0</replaceable></entry>
                </row>
                <row>
                  <entry>Root of OpenACS service file tree</entry>
                  <entry><replaceable>/var/lib/aolserver/service0</replaceable></entry>
                </row>
                <row>
                  <entry>Location of source code tarballs for new software</entry>
                  <entry>/tmp</entry>
                </row>
                <row>
                  <entry>The OpenACS tarball contains some files which
                are useful while setting up other software.  Those
                files are located at:</entry>
                  <entry>/tmp/&tarballpath;/packages/acs-core-docs/www/files</entry>
                </row>
                <row>
                  <entry>Database backup directory</entry>
                  <entry><replaceable>/var/lib/aolserver/service0/database-backup</replaceable></entry>
                </row>
                <row>
                  <entry>Service config files</entry>
                  <entry><replaceable>/var/lib/aolserver/service0/etc</replaceable></entry>
                </row>
                <row>
                  <entry>Service log files</entry>
                  <entry><replaceable>/var/lib/aolserver/service0/log</replaceable></entry>
                </row>
                <row>
                  <entry>Compile directory</entry>
                  <entry>/usr/local/src</entry>
                </row>
                <row>
                  <entry>PostGreSQL directory</entry>
                  <entry>/usr/local/pgsql</entry>
                </row>
                <row>
                  <entry>AOLServer directory</entry>
                  <entry>/usr/local/aolserver</entry>
                </row>
              </tbody>
            </tgroup>
          </informaltable>
        </figure>

        <para>
	  None of these locations are set in stone - they're simply
	  the values that we've chosen.  The values that you'll
	  probably want to change, such as service name, are
	  <replaceable>marked like this</replaceable>.  The other
	  values we recommend you leave unchanged unless you have a
	  reason to change them.</para>
        
        <note>
          <para>
	  Some of the paths and user accounts have been changed from
	  those recommended in previous versions of this document to
	  improve security and maintainability.  See <ulink
	  url="http://openacs.org/forums/message-view?message_id=82934">this
	  thread</ulink> for discussion.
</para>
        </note>

        
      </sect2>

      <sect2 id="install-stuck">
	<title>Getting Help during installation</title>
	
	<para>
	  We'll do our best to assure that following our instructions will get
	  you to the promised land. If something goes wrong, don't
	  panic. There are plenty of ways to get help. Here are some tips:
	</para>

	<itemizedlist>
	  <listitem>
            <para>
		  Keep track of the commands you are run and record their output. I
		  like to do my installations in a shell inside of emacs
		  (<computeroutput>M-x shell</computeroutput>) so that I can save
		  the output if needed. An alternative would be to use the
		  <computeroutput>script</computeroutput> command.
		</para>
	  </listitem>

	  <listitem>
            <para>
		  We'll point out where the error logs for the various pieces of
		  software are. Output from those logs will help us help you. Don't
		  worry if you feel overwhelmed by all the information in the error
		  logs. Over time, you'll find that they make more and more
		  sense. Soon, you'll actually look forward to errors so that you
		  can run to the log and diagnose the problem. 
		</para>
	  </listitem>

	  <listitem>
            <para>
		  Search the <ulink url="http://openacs.org/bboard/">bboards at
		  openacs.org</ulink> - you'll often find many people who have
		  struggled through the same spot that you're in.
		</para>
	  </listitem>

	  <listitem>
            <para>
 The bottom of each page has a link to OpenACS.org, where you can post
		  comments and read other users comments about the
		  contents of the page.
		</para>
	  </listitem>

	  <listitem>
            <para>
		  Ask questions at the irc channel on openprojects.net
		  (#openacs). They're knowledgeable and quite friendly
		  if you can keep them on topic.
		</para>
	  </listitem>

	  <listitem>
            <para>
		  Post a question on the <ulink
		  url="http://openacs.org/bboard/">bboards</ulink>. Make sure
		  you've done a search first. When you do post, be sure to include
		  your setup information (OS, etc) as well as the exact commands
		  that are failing with the accompanying error.  If
		  there's a SQL error in the TCL error or in the log,
		  post that too.
		</para>
	  </listitem>

	  <listitem>
            <para>
		  If you find errors in this document or if you have ideas about
		  making it better, please post them in our
		  <ulink
          url="http://openacs.org/bugtracker/openacs/">BugTracker</ulink>.
        </para>
          </listitem>
        </itemizedlist>
      </sect2>
    </sect1>
    <para><phrase role="cvstag">($Id$)</phrase></para>

  </chapter>
