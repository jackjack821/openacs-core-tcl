<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>Advanced Topics</title><meta name="generator" content="DocBook XSL Stylesheets V1.50.0"><link rel="home" href="index.html" title="OpenACS Documentation"><link rel="up" href="tutorial.html" title="Chapter 8. Development Tutorial"><link rel="previous" href="tutorial-debug.html" title="Debugging and Automated Testing"><link rel="next" href="dev-guide.html" title="Chapter 9. Development Reference"><link rel="stylesheet" href="openacs.css" type="text/css"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><a href="http://openacs.org"><img src="images/alex.jpg" border="0"></a><table width="100%" summary="Navigation header" border="0"><tr><td width="20%" align="left"><a accesskey="p" href="tutorial-debug.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter 8. Development Tutorial</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="dev-guide.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="tutorial-advanced"></a>Advanced Topics</h2></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Important</h3><p>This section is a work in progress.</p></div><div class="authorblurb"><p>
    by <a href="mailto:joel@aufrecht.org" target="_top">Joel Aufrecht</a><br>
          OpenACS docs are written by the named authors, but may be edited
          by OpenACS documentation staff.
        </p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="id2855711"></a>Overview</h3></div></div><p>This tutorial covers topics which are not essential to
    creating a minimal working package.  Each section can be used
    independently of all of the others; all sections assume that
    you've completed the basic tutorial.</p><div class="itemizedlist"><ul type="disc"><li><p>How to enforce security so that users can't
      change other users records</p></li><li><p>How to use the content management tables so that ... what?</p></li><li><p>How to make your package searchable with OpenFTS/Oracle</p></li><li><p>How to make your package send email notifications</p></li><li><p>How to prepare pagelets for inclusion in other pages</p></li><li><p>How and when to put procedures in a tcl procedure library</p></li><li><p>How to add general_comments to your pages</p></li><li><p>More on ad_form - data validation, other stuff.
      (plan to draw from Jon Griffin's doc)</p></li><li><p>How and when to implement caching</p></li><li><p>partialquery in xql</p></li><li><p>How to use the html/text entry widget to get the
      &quot;does this look right&quot; confirm page </p></li><li><p>APM package dependencies</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="id2855809"></a>General_comments</h3></div></div><p>You can track comments for any ACS Object.  Here we'll track
    comments for notes.  On the notes.tcl/adp pair, which is used to
    display individual notes, we want to put a link to add comments at
    the bottom of the screen.  If there are any comments, we want to
    show them.</p><p>First, we need to generate a url for adding comments.  In notes.tcl:</p><pre class="programlisting">
set comment_add_url &quot;[general_comments_package_url]comment-add?[export_vars {
 { object_id $note_id } 
 { object_name $title } 
 { return_url &quot;[ad_conn url]?[ad_conn query]&quot;} 
}]&quot;
</pre><p>This calls a global, public tcl function that the
    general_comments package registered, to get its url. You then
    embed in that url the id of the note and its title, and set the
    return_url to the current url so that the user can return after
    adding a comment.</p><p>Now we need to create html that shows any existing comments.
    We do this with another general_comments function:</p><pre class="programlisting">set comments_html [general_comments_get_comments
    -print_content_p 1 $note_id]</pre><p>First, we pass in an optional parameter that that says to actually
    show the contents of the comments, instead of just the fact that
    there are comments. Then you pass the note id, which is also the
    acs_object id.</p><p>Now we put our two new variables in the notes.adp
    page.</p><pre class="programlisting">&lt;a href=&quot;@comment_add_url@&quot;&gt;Add a comment&lt;/a&gt;
@comments_html@</pre></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="id2855890"></a>Prepare the package for distribution.</h3></div></div><p>Browse to the package manager.  Click on
        <tt><span class="guilabel">tutorialapp</span></tt>.</p><p>Click on <tt><span class="guilabel">Generate a distribution file
        for this package from the
        filesystem</span></tt>.
</p><p>Click on the file size
        (<tt><span class="guilabel">37.1KB</span></tt>)
        after the label <tt><span class="guilabel">Distribution
        File:</span></tt> and save the file to
        /tmp.</p><p><a class="indexterm" name="id2855958"></a>
</p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tutorial-debug.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="dev-guide.html">Next</a></td></tr><tr><td width="40%" align="left">Debugging and Automated Testing&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="tutorial.html">Up</a></td><td width="40%" align="right">&nbsp;Chapter 9. Development Reference</td></tr></table><hr><address>rmello at fslc.usu.edu</address><address><a href="mailto:vinod@kurup.com">vinod@kurup.com</a></address></div><a name="comments"></a><center><a href="http://openacs.org/doc/openacs-4/tutorial-advanced.html#comments">View comments on this page at openacs.org</a></center></body></html>
