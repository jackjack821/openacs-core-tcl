<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type"><title>OpenACS 4 Groups Requirements</title><meta name="generator" content="DocBook XSL Stylesheets V1.50.0"><link rel="home" href="index.html" title="OpenACS Documentation"><link rel="up" href="kernel-doc.html" title="Chapter 7. Kernel Documentation"><link rel="previous" href="permissions-design.html" title="OpenACS 4 Permissions Design"><link rel="next" href="groups-design.html" title="OpenACS 4 Groups Design"><link rel="stylesheet" href="openacs.css" type="text/css"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><a href="http://openacs.org"><img src="images/alex.jpg" border="0"></a><table width="100%" summary="Navigation header" border="0"><tr><td width="20%" align="left"><a accesskey="p" href="permissions-design.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter 7. Kernel Documentation</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="groups-design.html">Next</a></td></tr></table><hr></div><div class="sect1"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="groups-requirements"></a>OpenACS 4 Groups Requirements</h2></div></div><div class="authorblurb"><p>
by <a href="http://planitia.org" target="_top">Rafael H. Schloming</a>, <a href="mailto:mthomas@arsdigita.com" target="_top">Mark Thomas</a><br>
		  OpenACS docs are written by the named authors, but may be edited
		  by OpenACS documentation staff.
		</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-intro"></a>Introduction</h3></div></div><p>Almost all database-backed websites have users, and need to model the
grouping of users. The OpenACS 4 Parties and Groups system is intended to provide
the flexibility needed to model complex real-world organizational structures,
particularly to support powerful subsite services; that is, where one OpenACS
installation can support what appears to the user as distinct web services
for different user communities.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-vision"></a>Vision Statement</h3></div></div><p>A powerful web service that can meet the needs of large enterprises must
be able to model the the real world's very rich organizational structures
and many ways of decomposing the same organization. For example, a
corporation can be broken into structures (the corporation, its divisions,
and their departments) or regions (the Boston office, the LA office); a
person who is employed by (is a member of) a specific department is also a
member of the division and the corporation, and works at (is a member of, but
in a different sense) a particular office. OpenACS 4's Parties and Groups
system will support such complex relations faithfully.</p><p><span class="strong"><em>Historical Motivations</em></span></p><p>The primary limitation of the OpenACS 3.x user group system is that it
restricts the application developer to representing a &quot;flat group&quot;
that contains only users: The <tt>user_groups</tt> table may contain the
<tt>group_id</tt> of a parent group, but parent-child relationship
support is limited because it only allows one kind of relationship between
groups to be represented. Moreover, the Oracle database's limited support
for tree-like structures makes the queries over these relationships
expensive.</p><p>In addition, the Module Scoping design in OpenACS 3.0 introduced a
<span class="emphasis"><em>party</em></span> abstraction - a thing that is a person or a group of people -
though not in the form of an explicit table. Rather, the triple of
<tt>scope</tt>, <tt>user_id</tt>, and <tt>group_id</tt> columns
was used to identify the party. One disadvantage of this design convention is
that it increases a data model's complexity by requiring the programmer
to:</p><div class="itemizedlist"><ul type="disc"><li><p>add these three columns to each &quot;scoped&quot; table</p></li><li><p>define a multi-column check constraint to protect against data corruption
(e.g., a row with a <tt>scope</tt> value of &quot;group&quot; but a null
<tt>group_id</tt>)</p></li><li><p>perform extra checks in <tt>Tcl</tt> and <tt>PL/SQL</tt>
functions and procedures to check both the <tt>user_id</tt> and
<tt>group_id</tt> values</p></li></ul></div><p>In sum, the goal of the <span class="strong"><em>Parties and Groups</em></span> system is to
provide OpenACS programmers and site administrators with simple tools that fully
describe the complex relationships that exist among groups in the real
world.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-user-scenarios"></a>User Scenarios</h3></div></div><p>Pat Developer has a client project and wants to model the company, its
offices, its divisions, and its departments as groups and the employees as
users.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-system-overview"></a>System Overview</h3></div></div><p>We start with <span class="strong"><em>Groups</em></span>, which contain members; the
<span class="strong"><em>member can be either a person or another group</em></span> (i.e. a
member is a party).</p><p>In addition to membership, the party and groups system defines a
<span class="strong"><em>composition</em></span> relationship that may exist between groups: A
group can be a <span class="strong"><em>component</em></span> of another group. The child group
is called a <span class="emphasis"><em>component group</em></span>; the parent group is called a
<span class="emphasis"><em>composite group</em></span>.</p><p>A group <span class="strong"><em>G<sub>c</sub></em></span> can be a member and/or a component
of another group <span class="strong"><em>G<sub>p</sub></em></span>; the difference is in the way
the members of <span class="strong"><em>G<sub>c</sub></em></span> are related to
<span class="strong"><em>G<sub>p</sub></em></span>:</p><div class="itemizedlist"><ul type="disc"><li><p>If a party <span class="strong"><em>P</em></span> is a member (or a component) of
<span class="strong"><em>G<sub>c</sub></em></span> and if <span class="strong"><em>G<sub>c</sub></em></span> is a
component of <span class="strong"><em>G<sub>p</sub></em></span>, then <span class="strong"><em>P</em></span> is also
a member (or a component) of <span class="strong"><em>G<sub>p</sub></em></span></p></li><li><p>If a party <span class="strong"><em>P</em></span> is a member (or a component) of
<span class="strong"><em>G<sub>c</sub></em></span> and if <span class="strong"><em>G<sub>c</sub></em></span> is a
member of <span class="strong"><em>G<sub>p</sub></em></span>, then <span class="strong"><em>no
relationship</em></span> between <span class="strong"><em>P</em></span> and
<span class="strong"><em>G<sub>p</sub></em></span> exists as a result of the relationship between
<span class="strong"><em>G<sub>p</sub></em></span> and <span class="strong"><em>G<sub>p</sub></em></span>.</p></li></ul></div><p>Consider an example to make this less abstract: Pretend that the Sierra
Club is a <span class="emphasis"><em>member</em></span> of Greenpeace. The Sierra Club has chapters; each
chapter is a <span class="emphasis"><em>component</em></span> of the Sierra Club. If Eddie Environmentalist
is a member of the Massachusetts Chapter of the Sierra Club, Eddie is
automatically a member of the Sierra Club, but being a Sierra Club member
does not make Eddie a member of Greenpeace.</p><p>In the OpenACS, Greenpeace, Sierra Club, and the Sierra Club chapters would be
modeled as groups, and Eddie would be a user. There would be a composition
relationship between each Sierra Club chapter and the Sierra Club. Membership
relationships would exist between Eddie and the Massachusetts Chapter,
between Eddie and the Sierra Club (due to Eddie's membership in the
Massachusetts chapter), and between the Sierra Club and Greenpeace.</p><p>Membership requirements can vary from group to group. The parties and
groups system must provide a base type that specifies the bare minimum
necessary to join a group.</p><p>The parties and groups system must support constraints between a composite
group <span class="strong"><em>G<sub>P</sub></em></span> and any of its component groups,
<span class="strong"><em>G<sub>C</sub></em></span>. For example, the system should be able to
enforce a rule like: Do not allow a party <span class="strong"><em>P</em></span> to become a
member of <span class="strong"><em>G<sub>C</sub></em></span> unless <span class="strong"><em>P</em></span> is already
a member of <span class="strong"><em>G<sub>P</sub></em></span>.</p></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-links"></a>Related Links</h3></div></div><div class="itemizedlist"><ul type="disc"><li><p><a href="groups-design.html">OpenACS 4 Groups Design</a></p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-data-model"></a>Requirements: Data Model</h3></div></div><p>The data model for the parties and groups system must provide support for
the following types of entities:</p><div class="variablelist"><dl><dt><span class="term"><span class="strong"><em>10.0 Parties</em></span>

</span></dt><dd><p>A <span class="strong"><em>party</em></span> is an entity used to represent either a
<span class="emphasis"><em>group</em></span> or a <span class="emphasis"><em>person</em></span>.</p><p>The data model should enforce these constraints:</p><p><span class="strong"><em>10.10</em></span> A party has an email address, which can be
empty.</p><p><span class="strong"><em>10.20</em></span> A party may have multiple email addresses
associated with it.</p><p><span class="strong"><em>10.30</em></span> The email address of a party must be unique within
an OpenACS system.</p></dd><dt><span class="term"><span class="strong"><em>20.0 Groups</em></span>

</span></dt><dd><p>A <span class="strong"><em>group</em></span> is a collection of zero or more parties.</p><p><span class="strong"><em>20.10</em></span> The data model should support the subclassing of
groups via OpenACS Objects.</p></dd><dt><span class="term"><span class="strong"><em>30.0 Persons</em></span>

</span></dt><dd><p>A <span class="strong"><em>person</em></span> represents an actual human being, past or
present.</p><p><a name="groups-requirements-30-10"></a><span class="strong"><em>30.10.</em></span> A person must have
an associated name.</p></dd><dt><span class="term"><span class="strong"><em>40.0 Users</em></span>

</span></dt><dd><p>A <span class="strong"><em>user</em></span> is a person who has registered with an OpenACS site. A
user may have additional attributes, such as a screen name.</p><p>The data model should enforce these constraints:</p><p><span class="strong"><em>40.10</em></span> A user must have a non-empty email address.</p><p><span class="strong"><em>40.20</em></span> Two different users may not have the same email
address on a single OpenACS installation; i.e., an email address identifies a
single user on the system.</p><p><span class="strong"><em>40.30</em></span> A user may have multiple email addresses; for
example, two or more email addresses may identify a single user.</p><p><span class="strong"><em>40.40</em></span> A user must have password field which can be
empty.</p></dd></dl></div><p>The data model for the parties and groups system must provide support for
the following types of relationships between entities:</p><div class="variablelist"><dl><dt><span class="term"><span class="strong"><em>50.0 Membership</em></span>

</span></dt><dd><p>
A party <span class="strong"><em>P</em></span> is considered a <span class="strong"><em>member</em></span> of a
group <span class="strong"><em>G</em></span></p><div class="itemizedlist"><ul type="disc"><li><p>when a direct membership relationship exists between <span class="strong"><em>P</em></span>
and <span class="strong"><em>G</em></span></p></li><li><p>or when there exists a direct membership relationship between
<span class="strong"><em>P</em></span> and some group <span class="strong"><em>G<sub>C</sub></em></span> and
<span class="strong"><em>G<sub>C</sub></em></span> has a composition relationship (c.f., <a href="groups-requirements.html#groups-requirements-60-0">60.0</a>) with <span class="strong"><em>G</em></span>.</p></li></ul></div><p><span class="strong"><em>50.10</em></span> A party may be a member of multiple groups.</p><p><span class="strong"><em>50.20</em></span> A party may be a member of the same group multiple
times only when all the memberships have different types; for example, Jane
may be a member of The Company by being both an Employee and an
Executive.</p><p><span class="strong"><em>50.30</em></span> A party as a member of itself is not supported.</p><p><span class="strong"><em>50.40</em></span> The data model must support membership
constraints.</p><p><span class="strong"><em>50.50</em></span>The data model should support the subclassing of
membership via OpenACS Relationships.</p></dd></dl></div><div class="variablelist"><dl><dt><span class="term">
<a name="groups-requirements-60-0"></a>
<span class="strong"><em>60.0 Composition</em></span>
</span></dt><dd><p>A group <span class="strong"><em>G<sub>C</sub></em></span> is considered a
<span class="strong"><em>component</em></span> of a second group
<span class="strong"><em>G<sub>P</sub></em></span></p><div class="itemizedlist"><ul type="disc"><li><p>when a direct composition relationship exists between
<span class="strong"><em>G<sub>C</sub></em></span> and <span class="strong"><em>G<sub>P</sub></em></span></p></li><li><p>or when there exists a direct composition relationship between
<span class="strong"><em>G<sub>C</sub></em></span> and some group <span class="strong"><em>G<sub>i</sub></em></span>
and <span class="strong"><em>G<sub>i</sub></em></span> has a composition relationship with
<span class="strong"><em>G<sub>P</sub></em></span>.</p></li></ul></div><p><span class="strong"><em>60.10</em></span>A group may be a component of multiple groups.</p><p><span class="strong"><em>60.20</em></span>A group as a component of itself is not
supported.</p><p><span class="strong"><em>60.30</em></span>The data model must support component
constraints.</p><p><span class="strong"><em>60.40</em></span>The data model should support the subclassing of
composition via OpenACS Relationships.</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-api"></a>Requirements: API</h3></div></div><p>The API should let programmers accomplish the following tasks:</p><div class="variablelist"><dl><dt><span class="term"><span class="strong"><em>70.10 Create a group</em></span>

</span></dt><dd><p>The parties and groups system provides a well defined API call that
creates a new group by running the appropriate transactions on the parties
and groups system data model. This API is subject to the constraints laid out
in the data model.</p></dd><dt><span class="term"><span class="strong"><em>70.20 Create a person</em></span>

</span></dt><dd><p>The parties and groups system provides a well defined API call that
creates a new person by running the appropriate transactions on the parties
and groups system data model. This API is subject to the constraints laid out
in the data model.</p></dd><dt><span class="term"><span class="strong"><em>70.30 Create a user</em></span>

</span></dt><dd><p>The parties and groups system provides a well defined API call that
creates a new user by running the appropriate transactions on the parties and
groups system data model. This API is subject to the constraints laid out in
the data model.</p></dd><dt><span class="term"><span class="strong"><em>80.10 Refine a person to a user</em></span>

</span></dt><dd><p>The parties and groups system provides a well defined API call that
creates a new user by running the appropriate transactions on an existing
person entity. This API is subject to the constraints laid out in the data
model.</p></dd><dt><span class="term"><span class="strong"><em>80.30 Demote a user to a person</em></span>

</span></dt><dd><p>The parties and groups system provides a well defined API call that
demotes an existing user entity to a person entity by running the appropriate
transactions on the existing user. This API is subject to the constraints
laid out in the data model.</p></dd><dt><span class="term"><span class="strong"><em>90.10 Update a party</em></span>

</span></dt><dd><p>The programmer should be able to modify, add, and delete attributes on any
party. This API is subject to the constraints laid out in the data model.</p></dd><dt><span class="term"><span class="strong"><em>95.10 Get the attributes of a party</em></span>

</span></dt><dd><p>The programmer should be able to view the attributes on any party. This
API is subject to the constraints laid out in the data model.</p></dd><dt><span class="term"><span class="strong"><em>100.10 Delete a party</em></span>


</span></dt><dd><p>The system provides an API for deleting a party. This API is subject to
the constraints laid out in the data model.</p><p><span class="strong"><em>100.30</em></span> The system may provide a single API call to remove
the party from all groups and then delete the party.</p><p><span class="strong"><em>100.40</em></span> In the case of a group, the system may provide a
single API call to remove all parties from a group and then delete the
group.</p></dd><dt><span class="term"><span class="strong"><em>110.0 Add a party as a member of a group</em></span>

</span></dt><dd><p>The parties and groups system provides an API for adding a party as a
member of a group. This API is subject to the constraints laid out in the
data model.</p></dd><dt><span class="term"><span class="strong"><em>115.0 Add a group as a component of a second group</em></span>

</span></dt><dd><p>The parties and groups system provides an API for adding a group as a
component of a second group. This API is subject to the constraints laid out
in the data model.</p></dd><dt><span class="term"><span class="strong"><em>120.0 Remove a party as a member of a group</em></span>

</span></dt><dd><p>The parties and groups system provides an API for deleting a party's
membership in a group. This API is subject to the constraints laid out in the
data model.</p></dd><dt><span class="term"><span class="strong"><em>125.0 Remove a group as a component of a second
group</em></span>

</span></dt><dd><p>The parties and groups system provides an API for deleting a group's
composition in a second group. This API is subject to the constraints laid
out in the data model.</p></dd><dt><span class="term"><span class="strong"><em>130.0 Membership check</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Is party <span class="strong"><em>P</em></span> a member of group
<span class="strong"><em>G</em></span>?&quot;</p></dd><dt><span class="term"><span class="strong"><em>135.0 Composition check</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Is group <span class="strong"><em>G<sub>C</sub></em></span> a component of group
<span class="strong"><em>G<sub>P</sub></em></span>?&quot;</p></dd><dt><span class="term"><span class="strong"><em>140.0 Get members query</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Which parties are members of group <span class="strong"><em>G</em></span>?&quot;</p></dd><dt><span class="term"><span class="strong"><em>145.0 Get components query</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Which groups are components of group <span class="strong"><em>G</em></span>?&quot;</p></dd><dt><span class="term"><span class="strong"><em>150.0 Member-of-groups query</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Of which groups is party <span class="strong"><em>P</em></span> a member?&quot;</p></dd><dt><span class="term"><span class="strong"><em>155.0 Component-of-groups query</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Of which groups is group <span class="strong"><em>G</em></span> a component?&quot;</p></dd><dt><span class="term"><span class="strong"><em>160.0 Allowed membership check</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Is party <span class="strong"><em>P</em></span> allowed to become a member of group
<span class="strong"><em>G</em></span>?&quot;</p></dd><dt><span class="term"><span class="strong"><em>165.0 Allowed composition check</em></span>


</span></dt><dd><p>The parties and groups system provides an API for answering the question:
&quot;Is group <span class="strong"><em>G<sub>C</sub></em></span> allowed to become a component
of group <span class="strong"><em>G<sub>P</sub></em></span>?&quot;</p></dd><dt><span class="term"><span class="strong"><em>170.0 Efficiency</em></span>


</span></dt><dd><p>Since many pages at a site may check membership in a group before serving
a page (e.g., as part of a general permissions check), the data model must
support the efficient storage and retrieval of party attributes and
membership.</p></dd><dt><span class="term"><span class="strong"><em>180.0 Ease of Use</em></span>


</span></dt><dd><p>Since many SQL queries will check membership in a group as part of the
<tt>where</tt> clause, whatever mechanism is used to check membership in SQL
should be fairly small and simple.</p></dd></dl></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-ui"></a>Requirements: User Interface</h3></div></div><p>The user interface is a set of HTML pages that are used to drive the
underlying API. The user interface may provide the following functions:</p><div class="itemizedlist"><ul type="disc"><li><p><span class="strong"><em>200.0</em></span> Create a party</p></li><li><p><span class="strong"><em>210.0</em></span> View the attributes of a party</p></li><li><p><span class="strong"><em>220.0</em></span> Update the attributes of a party</p></li><li><p><span class="strong"><em>240.0</em></span> Delete a party</p></li><li><p><span class="strong"><em>250.0</em></span> Add a party to a group</p></li><li><p><span class="strong"><em>260.0</em></span> Remove a party from a group</p></li><li><p><span class="strong"><em>270.0</em></span> Perform the membership and composition checks
outlined in 130.x to 165.x</p></li></ul></div></div><div class="sect2"><div class="titlepage"><div><h3 class="title"><a name="groups-requirements-rev-history"></a>Revision History</h3></div></div><div class="informaltable"><table border="1"><colgroup><col><col><col><col></colgroup><tbody><tr><td><span class="strong"><em>Document Revision #</em></span></td><td><span class="strong"><em>Action Taken, Notes</em></span></td><td><span class="strong"><em>When?</em></span></td><td><span class="strong"><em>By Whom?</em></span></td></tr><tr><td>0.1</td><td>Creation</td><td>08/16/2000</td><td>Rafael Schloming</td></tr><tr><td>0.2</td><td>Initial revision</td><td>08/19/2000</td><td>Mark Thomas</td></tr><tr><td>0.3</td><td>Edited and reviewed, conforms to requirements template</td><td>08/23/2000</td><td>Kai Wu</td></tr><tr><td>0.4</td><td>Further revised, added UI requirements</td><td>08/24/2000</td><td>Mark Thomas</td></tr><tr><td>0.5</td><td>Final edits, pending freeze</td><td>08/24/2000</td><td>Kai Wu</td></tr><tr><td>0.6</td><td>More revisions, added composition requirements</td><td>08/30/2000</td><td>Mark Thomas</td></tr><tr><td>0.7</td><td>More revisions, added composition requirements</td><td>09/08/2000</td><td>Mark Thomas</td></tr></tbody></table></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="permissions-design.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="groups-design.html">Next</a></td></tr><tr><td width="40%" align="left">OpenACS 4 Permissions Design&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="kernel-doc.html">Up</a></td><td width="40%" align="right">&nbsp;OpenACS 4 Groups Design</td></tr></table><hr><address>rmello at fslc.usu.edu</address><address><a href="mailto:vinod@kurup.com">
			vinod@kurup.com
		  </a></address></div></body></html>
