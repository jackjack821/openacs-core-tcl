<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Add the Service to CVS - OPTIONAL</title><meta name="generator" content="DocBook XSL Stylesheets V1.58.1"><link rel="home" href="index.html" title="OpenACS Documentation"><link rel="up" href="cvs-tips.html" title="Appendix C. Using CVS with an OpenACS Site"><link rel="previous" href="cvs-tips.html" title="Appendix C. Using CVS with an OpenACS Site"><link rel="next" href="acs-plat-dev.html" title="Part IV. For OpenACS Platform Developers"><link rel="stylesheet" href="openacs.css" type="text/css"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><a href="http://openacs.org"><img src="images/alex.jpg" border="0"></a><table width="100%" summary="Navigation header" border="0"><tr><td width="20%" align="left"><a accesskey="p" href="cvs-tips.html">Prev</a> </td><th width="60%" align="center">Appendix C. Using CVS with an OpenACS Site</th><td width="20%" align="right"> <a accesskey="n" href="acs-plat-dev.html">Next</a></td></tr></table><hr></div><div class="sect1" lang="en"><div class="titlepage"><div><h2 class="title" style="clear: both"><a name="cvs-service-import"></a>Add the Service to CVS - OPTIONAL</h2></div></div><a class="indexterm" name="id2969130"></a><p>These steps take an existing OpenACS directory and add
          it to a <a href="install-cvs.html" title="Initialize CVS (OPTIONAL)">CVS
          repository.</a>.</p><div class="orderedlist"><ol type="1"><li><p>Create and set permissions on a subdirectory in the local cvs repository.</p><pre class="screen">[root@yourserver root]# <b><tt>mkdir /cvsroot/<span class="replaceable">service0</span></tt></b>
[root@yourserver root]#<b><tt> chown <span class="replaceable">service0</span>.web /cvsroot/<span class="replaceable">service0</span></tt></b>
[root@yourserver root]#
<pre class="action">mkdir /cvsroot/<span class="replaceable">service0</span>
chown <span class="replaceable">service0</span>.web /cvsroot/<span class="replaceable">service0</span></pre></pre></li><li><p>Add the repository location to the user environment.</p><pre class="screen">[root@yourserver root]# <b><tt>su - <span class="replaceable">service0</span></tt></b>
[service0@yourserver service0]$<b><tt> emacs .bashrc</tt></b></pre><p>Put this string into <tt>/home/<span class="replaceable">service0</span>/.bashrc</tt>:</p><pre class="programlisting">export CVSROOT=/cvsroot</pre><pre class="screen">[service0@yourserver service0]$ <b><tt>exit</tt></b>
logout

[root@yourserver root]#</pre></li><li><p>Import all files into cvs.  In order to work on
            files with source control, the files must be checked out
            from cvs.  So we will import, move aside, and then check
            out all of the files.  In the cvs import command,
            <tt><span class="replaceable">service0</span></tt>
            refers to the cvs repository to use; it uses the CVSROOT
            plus this string,
            i.e.
            <tt>/cvsroot/<span class="replaceable">service0</span></tt>.
            &quot;OpenACS&quot; is the vendor tag, and &quot;openacs-4-7-0d&quot; is the
            release tag.  These tags will be useful in upgrading and
            branching.  -m sets the version comment.</p><pre class="screen">[root@yourserver root]# <b><tt>su - <span class="replaceable">service0</span></tt></b>
[service0@yourserver service0]$ <b><tt>cd /web/<span class="replaceable">service0</span></tt></b>
[service0@yourserver service0]$ <b><tt>cvs import -m &quot;initial install&quot; <span class="replaceable">service0</span> OpenACS openacs-4-7-0d</tt></b>
N <span class="replaceable">service0</span>/license.txt
N <span class="replaceable">service0</span>/readme.txt
<span class="emphasis"><em>(many lines omitted)</em></span>
N <span class="replaceable">service0</span>/www/SYSTEM/flush-memoized-statement.tcl

No conflicts created by this import

[service0@yourserver service0]$
<pre class="action">su - <span class="replaceable">service0</span>
cd /web/<span class="replaceable">service0</span>
cvs import -m &quot;initial install&quot; <span class="replaceable">service0</span> OpenACS openacs-4-7-0d</pre></pre><p>Move the original directory to a temporary location, and check out the cvs repository in its place.  If the service starts correctly, come back and remove the temporary copy of the uploaded files.</p><pre class="screen">[service0@yourserver service0]$ <b><tt>cd ..</tt></b>
[service0@yourserver web]$<b><tt> mv <span class="replaceable">service0</span> <span class="replaceable">service0</span>.orig</tt></b>
[service0@yourserver web]$ <b><tt>cvs checkout <span class="replaceable">service0</span></tt></b>
cvs checkout: Updating <span class="replaceable">service0</span>
U <span class="replaceable">service0</span>/license.txt
<span class="emphasis"><em>(many lines omitted)</em></span>
U <span class="replaceable">service0</span>/www/SYSTEM/dbtest.tcl
U <span class="replaceable">service0</span>/www/SYSTEM/flush-memoized-statement.tcl
[service0@yourserver web]$ <b><tt>exit</tt></b>
logout

[root@yourserver web]#
<pre class="action">cd ..
mv <span class="replaceable">service0</span> <span class="replaceable">service0</span>.orig
cvs checkout <span class="replaceable">service0</span>
exit</pre></pre></li></ol></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="cvs-tips.html">Prev</a> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right"> <a accesskey="n" href="acs-plat-dev.html">Next</a></td></tr><tr><td width="40%" align="left">Appendix C. Using CVS with an OpenACS Site </td><td width="20%" align="center"><a accesskey="u" href="cvs-tips.html">Up</a></td><td width="40%" align="right"> Part IV. For OpenACS Platform Developers</td></tr></table><hr><address><a href="mailto:docs@openacs.org">docs@openacs.org</a></address></div><a name="comments"></a><center><a href="http://openacs.org/doc/cvs-service-import.html#comments">View comments on this page at openacs.org</a></center></body></html>
